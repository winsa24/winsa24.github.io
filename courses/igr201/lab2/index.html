<!DOCTYPE html>
<html lang='en' ><meta charset="utf-8">
<meta name="viewport" content="width=device-width">


<title>Qt - Drawing Tool | Xiang WEI</title>
<link rel="stylesheet" href="https://winsa24.github.io/css/eureka.min.css">
<script defer src="https://winsa24.github.io/js/eureka.min.js"></script>

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload"
  href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&family=Noto+Serif+SC:wght@400;600;700&display=swap"
  as="style" onload="this.onload=null;this.rel='stylesheet'">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/styles/solarized-light.min.css"
   media="print"
  onload="this.media='all';this.onload=null" crossorigin>
<script defer src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/highlight.min.js"
   crossorigin></script>
<script defer src="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/js/all.min.js"
   integrity="sha256-uNYoXefWRqv&#43;PsIF/OflNmwtKM4lStn9yrz2gVl6ymo="  crossorigin></script>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"
   integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3&#43;Aro6EYUG4&#43;cU&#43;KJWu/X"  media="print"
  onload="this.media='all';this.onload=null" crossorigin>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" 
  integrity="sha384-g7c&#43;Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI&#43;sEnkvrMWph2EDg4"  crossorigin></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js"
   integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC&#43;Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa"  crossorigin></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    renderMathInElement(document.body, {
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "$", right: "$", display: false },
        { left: "\\(", right: "\\)", display: false },
        { left: "\\[", right: "\\]", display: true }
      ],
    });
  });
</script>


<link rel="icon" type="image/png" sizes="32x32" href="https://winsa24.github.io/images/icon_hu64421c6c7700f606f0ad45d807017b09_5843_32x32_fill_box_center_2.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://winsa24.github.io/images/icon_hu64421c6c7700f606f0ad45d807017b09_5843_180x180_fill_box_center_2.png">

<meta name="description"
  content="Qt Lab #2: 2D Drawing Tool In this work, I completely finished a drawing application based on Qt toolkit by following all the instructions in Lab 2. The application has an interactive interface which allows users to draw multiple shapes in different colors, line styles and thickness, by clicking buttons or dragging sliders. Moreover, by clicking bottom buttons users can switch to editing part which allows users to select an existing shape and move, resize or change attributes of it.">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
      "@type": "ListItem",
      "position": 1 ,
      "name":"Courses",
      "item":"https://winsa24.github.io/courses/"},{
      "@type": "ListItem",
      "position": 2 ,
      "name":"IGR201b: Interactive 2D/Mobile/Web Application Development",
      "item":"https://winsa24.github.io/courses/igr201/"},{
      "@type": "ListItem",
      "position": 3 ,
      "name":"Qt - Drawing Tool",
      "item":"https://winsa24.github.io/courses/igr201/lab2/"}]
}
</script>



<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://winsa24.github.io/courses/igr201/lab2/"
    },
    "headline": "Qt - Drawing Tool | Xiang WEI","datePublished": "2020-10-30T00:00:00+00:00",
    "dateModified": "2020-10-30T00:00:00+00:00",
    "wordCount":  733 ,
    "publisher": {
        "@type": "Person",
        "name": "C. Wang",
        "logo": {
            "@type": "ImageObject",
            "url": "https://winsa24.github.io/images/icon.png"
        }
        },
    "description": "Qt Lab #2: 2D Drawing Tool In this work, I completely finished a drawing application based on Qt toolkit by following all the instructions in Lab 2. The application has an interactive interface which allows users to draw multiple shapes in different colors, line styles and thickness, by clicking buttons or dragging sliders. Moreover, by clicking bottom buttons users can switch to editing part which allows users to select an existing shape and move, resize or change attributes of it."
}
</script><meta property="og:title" content="Qt - Drawing Tool | Xiang WEI" />
<meta property="og:type" content="article" />


<meta property="og:image" content="https://winsa24.github.io/images/icon.png">


<meta property="og:url" content="https://winsa24.github.io/courses/igr201/lab2/" />




<meta property="og:description" content="Qt Lab #2: 2D Drawing Tool In this work, I completely finished a drawing application based on Qt toolkit by following all the instructions in Lab 2. The application has an interactive interface which allows users to draw multiple shapes in different colors, line styles and thickness, by clicking buttons or dragging sliders. Moreover, by clicking bottom buttons users can switch to editing part which allows users to select an existing shape and move, resize or change attributes of it." />




<meta property="og:locale" content="en" />




<meta property="og:site_name" content="Xiang WEI" />






<meta property="article:published_time" content="2020-10-30T00:00:00&#43;00:00" />


<meta property="article:modified_time" content="2020-10-30T00:00:00&#43;00:00" />



<meta property="article:section" content="courses" />


<meta property="article:tag" content="Lab" />

<meta property="article:tag" content="Qt" />





<meta property="og:see_also" content="https://winsa24.github.io/courses/igr201/lab1/" />



<body class="flex flex-col min-h-screen">
    <header class="fixed flex items-center w-full min-h-16 pl-scrollbar z-50 bg-secondary-bg shadow-sm">
        <div class="w-full max-w-screen-xl mx-auto"><script>
    let storageColorScheme = localStorage.getItem("lightDarkMode")
    if (((storageColorScheme == 'Auto' || storageColorScheme == null) && window.matchMedia("(prefers-color-scheme: dark)").matches) || storageColorScheme == "Dark") {
        document.getElementsByTagName('html')[0].classList.add('dark')
    }
</script>
<nav class="flex items-center justify-between flex-wrap p-4">
    <a href="/" class="mr-6 text-primary-text text-xl font-bold">Xiang WEI</a>
    <button id="navbar-btn" class="md:hidden flex items-center px-3 py-2" aria-label="Open Navbar">
        <i class="fas fa-bars"></i>
    </button>

    <div id="target"
        class="hidden block md:flex md:flex-grow md:justify-between md:items-center w-full md:w-auto text-primary-text z-20">
        <div class="text-sm md:flex-grow pb-4 md:pb-0 border-b md:border-b-0">
            <a href="/#about"
                class="block mt-4 md:inline-block md:mt-0  hover:text-eureka mr-4">About</a>
            <a href="/en/projects/"
                class="block mt-4 md:inline-block md:mt-0  hover:text-eureka mr-4">Projects</a>
            <a href="/en/courses/"
                class="block mt-4 md:inline-block md:mt-0  hover:text-eureka mr-4">Courses</a>
        </div>

        <div class="flex">
            <div class="relative pt-4 md:pt-0">
                <div class="cursor-pointer hover:text-eureka" id="lightDarkMode">
                    <i class="fas fa-adjust"></i>
                </div>
                <div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-30" id="is-open">
                </div>
                <div class="absolute flex flex-col left-0 md:left-auto right-auto md:right-0 hidden bg-secondary-bg w-48 rounded py-2 border border-tertiary-bg cursor-pointer z-40"
                    id='lightDarkOptions'>
                    <span class="px-4 py-1 hover:text-eureka">Light</span>
                    <span class="px-4 py-1 hover:text-eureka">Dark</span>
                    <span class="px-4 py-1 hover:text-eureka">Auto</span>
                </div>
            </div>
        </div>
    </div>

    <div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-0" id="is-open-mobile">
    </div>

</nav>
<script>
    let element = document.getElementById('lightDarkMode')
    if (storageColorScheme == null || storageColorScheme == 'Auto') {
        document.addEventListener('DOMContentLoaded', () => {
            switchMode('Auto')
        })
    } else if (storageColorScheme == "Light") {
        element.firstElementChild.classList.remove('fa-adjust')
        element.firstElementChild.setAttribute("data-icon", 'sun')
        element.firstElementChild.classList.add('fa-sun')
    } else if (storageColorScheme == "Dark") {
        element.firstElementChild.classList.remove('fa-adjust')
        element.firstElementChild.setAttribute("data-icon", 'moon')
        element.firstElementChild.classList.add('fa-moon')
    }
    
    document.addEventListener('DOMContentLoaded', () => {
        getcolorscheme();
        switchBurger();
    });
</script></div>
    </header>
    <main class="flex-grow pt-16">
        <div class="pl-scrollbar">
            <div class="w-full max-w-screen-xl lg:px-4 xl:px-8 mx-auto">


<div class="grid grid-cols-2 lg:grid-cols-8 gap-4 lg:pt-12">
    <div
        class="col-span-2 lg:col-start-2 lg:col-span-6 bg-secondary-bg rounded px-6 py-8">
        <h1 class="font-bold text-3xl text-primary-text">Qt - Drawing Tool</h1>
        <div class="flex flex-wrap flex-row items-center mt-2 text-tertiary-text">
    <div class="mr-6 my-2">
        <i class="fas fa-calendar mr-1"></i>
        <span>2020-10-30</span>
    </div>
    <div class="mr-6 my-2">
        <i class="fas fa-clock mr-1"></i>
        <span>4 min read</span>
    </div>
    
    

    
</div>
        
        
        

        <div class="content">
            <h1 id="qt-lab-2-2d-drawing-tool">Qt Lab #2: 2D Drawing Tool</h1>
<p>In this work, I completely finished a drawing application based on Qt toolkit by following all the
instructions in Lab 2. The application has an interactive interface which allows users to draw
multiple shapes in different colors, line styles and thickness, by clicking buttons or dragging
sliders. Moreover, by clicking bottom buttons users can switch to editing part which allows users
to select an existing shape and move, resize or change attributes of it. From the top toolbar, users
can read or save the images and are required to double-check before quitting.</p>
<h2 id="source-code--httpsgithubcomwinsa24-qt-drawingtool">Source code : <a href="https://github.com/winsa24/-QT-DrawingTool">https://github.com/winsa24/-QT-DrawingTool</a></h2>
<h2 id="1-create-a-new-project">1. Create a new project</h2>
<p>In this part, I created a class name “canvas” inherits from QWidget and used setMinimumSize( )
method to enforce an adequate size. Then in the MainWindow class, I created pointer in canvas
class and used setCentralWidget(canvas) to show it on the windows.</p>
<h2 id="2-draw-a-persistent-line">2. Draw a persistent line</h2>
<p>In this part, I set two QPoint variables for saving the coordinates of start and end points from the
mouse click. I override the paintEvent( ) and 3 mouse related functions. In order to get a persistent
line, I called update( ) function in the 3 mouse functions.</p>
<h2 id="3-specify-graphical-attributes">3. Specify graphical attributes</h2>
<p>In this part, I created 9 QAction and distributed them into 3 QActionGroup. Then I connected each
group into their functions, where I used setXXX( ) function to change the variables in canvas class.
In the end I called setPen( ) function in paintEvent based on those variables.</p>
<h2 id="4-draw-other-geometric-shapes">4. Draw other geometric shapes</h2>
<p>In this part, I added another QActionGroup for shapes and used the return results in paintEvent to
call different draw functions from the painter.</p>
<h2 id="5-draw-multiple-shapes">5. Draw multiple shapes</h2>
<p>In this part, I created an abstract class for shape which has a virtual function called “draw” and
several functions for setting start and end points and other attributes. Then I made different
shapes as subclass and override the draw function. Later, in canvas class, I created a
QList&lt;AbstractShape *&gt;. In mousePressedEvent a new object in different subclasses is created
regarding the selected shape and was appended into the list. In the end, I went through the list
and called the draw function for each element in the paintEvent function.</p>
<h2 id="6-edit-shapes">6. Edit shapes</h2>
<p>In this part, I added another QActionGroup for editing existed shapes. I created another QList in
QPainterPath type for detecting the selection. In the drawing mode, I kept the original code and
also maintained the QPainterPath list.
Then for selecting part, I created a 4*4 rectangle around my mouse click and called the intersects
function to get the index of the selected shape.
For moving, I get the distance between my mouse click and release and change the start and end
point of the selected shape based on the index I got from the select part.
For scaling, I get the coordinate of the selected shape and modified them by a number that I’ll get
from my MainWindow/ui.
For changing attributes, I simply called setPen function which I declared in the abstract shape
class.</p>
<h2 id="7-use-qtdesigner">7. Use QtDesigner</h2>
<p>In this part, I dragged some layouts and widgets directly on the panel. And in MainWindow class, I
added my canvas class to the MainLayout and active the ui. Also, I created several QButtonGroup
and classified different radio buttons into groups. Later, I added two sliders to leave the users
more freedom.</p>
<h2 id="8-ask-for-confirmation-before-exiting-the-program">8. Ask for confirmation before exiting the program</h2>
<p>In this part, I used the code from my first lab work based on QMessageBox.</p>
<h2 id="9-optional-read-and-save-shapes">9. (optional): Read and save shapes</h2>
<p>In this part, I acquired the loading/saving path by using the same function in my first lab work
based on QFileDialog. For reading, I used QImage.load( ) function and sent the image to the
canvas. Then call the update( ) to show the image automatically. For saving, I called QImage.save(
) function and linked it to the MainWindow.</p>
<h2 id="conclusion">Conclusion</h2>
<p>By following all the steps, I successfully created a simple drawing application by using qt
designer. Although there are still some flaws ( for example: the reading image part, it will show the
image with a white background ), I truly learnt a lot not only by reading the instruction files but
also by debugging my own code. Thanks for giving us such a chance to do the lab and I’ll try to
perfect it later.</p>

        </div>
        
        <div class="my-4">
    
    <a href="https://winsa24.github.io/tags/lab/" class="inline-block bg-tertiary-bg text-sm rounded px-3 py-1 my-1 mr-2 hover:text-eureka">#Lab</a>
    
    <a href="https://winsa24.github.io/tags/qt/" class="inline-block bg-tertiary-bg text-sm rounded px-3 py-1 my-1 mr-2 hover:text-eureka">#Qt</a>
    
</div>
        
        
        
        
        
        
        
<div class="flex flex-col md:flex-row md:justify-between -mx-2 mt-4 px-2 pt-4 border-t">
    <div>
        
    </div>
    <div class="md:text-right mt-4 md:mt-0">
        
        <span class="block font-bold">Next</span>
        <a href="https://winsa24.github.io/courses/igr201/lab1/" class="block">Qt - Basic</a>
        
    </div>
</div>

        
    </div>
    

    
    
    <div
        class="col-span-2 lg:col-start-2 lg:col-span-6 bg-secondary-bg rounded p-6">
        <h2 class="text-lg font-semibold mb-4">See Also</h2>
        <div class="content">
            
            <a href="https://winsa24.github.io/courses/igr201/lab1/">Qt - Basic</a>
            <br />
            
        </div>
    </div>
    
</div>
<script>
    document.addEventListener('DOMContentLoaded', ()=>{
        hljs.initHighlightingOnLoad();
    })
</script>

            </div>
        </div>
        
    </main>
    <footer class="pl-scrollbar">
        <div class="w-full max-w-screen-xl mx-auto"><div class="text-center p-6 pin-b">
    <p class="text-sm text-tertiary-text">&copy; 2020 <a href="https://www.wangchucheng.com/">C. Wang</a> and <a href="https://www.ruiqima.com/">R. Ma</a> &middot;  Powered by the <a href="https://github.com/wangchucheng/hugo-eureka" class="hover:text-eureka">Eureka</a> theme for <a href="https://gohugo.io" class="hover:text-eureka">Hugo</a></p>
</div></div>
    </footer>
</body>

</html>